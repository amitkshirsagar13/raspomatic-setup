# respomatic-setup
Setup wifi network setup:

```
sudo apt-get install dnsutils

sudo vi /etc/dhcpcd.conf
interface wlan0
static ip_address=192.168.1.111/24
static routers=192.168.1.1
static domain_name_servers=192.168.1.111 8.8.8.8


sudo vi /etc/wpa_supplicant/wpa_supplicant.conf
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
network={
    ssid="amogh"
    psk="poomit123"
    key_mgmt=WPA-PSK
}
```


### Mount Disk Drives:

```

sudo blkid
sudo apt-get install ntfs-3g
sudo vi /etc/fstab

UUID=XXXXX	/media/entertainment	ntfs-3g	rw,defaults	0	0
UUID=XXXXX	/media/data	ntfs-3g	rw,defaults	0	0
```

### Run Plex:

```
wget -O - https://dev2day.de/pms/dev2day-pms.gpg.key | sudo apt-key add -
echo "deb https://dev2day.de/pms/ stretch main" | sudo tee /etc/apt/sources.list.d/pms.list
sudo apt-get update -Y
sudo apt-get install -t stretch plexmediaserver-installer -Y


sudo service plexmediaserver stop
sudo vi /etc/default/plexmediaserver.prev
PLEX_MEDIA_SERVER_USER=pi

pi@k8m:/var/lib/plexmediaserver $ sudo chown -h pi:pi Library
pi@k8m:/media/pi $ sudo chown pi:pi pi && sudo chmod 777 pi
sudo service plexmediaserver start




docker run -d --restart=always --name plex -v /media/entertainment:/media/pi/entertainment --net=host -v /media/entertainment/plexmediaserver/Library:/root/Library jaymoulin/plex

```
Issue with adding TV Show can be solved by advanced options option dropdown MovieDatabase.


### Setup DNSMASQ

```
pi@k8m:/media/pi $ cat /etc/dnsmasq.conf 
# Dnsmasq.conf for raspberry pi    
# Full examples found here:  
 
# Set up your local domain here    
domain=raspomatic   
resolv-file=/etc/resolv.dnsmasq  
min-port=4096   
server=8.8.8.8
server=8.8.4.4
      
# Max cache size dnsmasq can give us, and we want all of it!    
cache-size=10000    
      
# Below are settings for dhcp. Comment them out if you dont want    
# dnsmasq to serve up dhcpd requests.    
# dhcp-range=192.168.0.100,192.168.0.149,255.255.255.0,1440m    
# dhcp-option=3,192.168.0.1    
# dhcp-authoritative
#address=/k8m.io/192.168.1.150
#address=/k8m.io/192.168.1.111
#address=/k8n1.io/192.168.1.123

pi@k8m:/media/pi $ cat /etc/resolv.conf
# Generated by resolvconf
nameserver 127.0.0.1

pi@k8m:/media/pi $ cat /etc/dnsmasq.d/k8m 
address=/k8cluster.io/192.168.1.1
address=/k8m.k8cluster.io/192.168.1.111
address=/k8n1.k8cluster.io/192.168.1.123


# All clients using dnsmasq server
poomit@k8n1:/media/pi $ sudo vi /etc/resolv.conf
nameserver 192.168.1.111
nameserver 8.8.8.8

```
